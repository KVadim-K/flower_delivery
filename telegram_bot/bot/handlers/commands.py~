from aiogram import Router, types
from aiogram.filters import Command
from aiogram.types import Message

from telegram_bot.bot.keyboards.inline import navigation_kb, confirm_link_kb
from telegram_bot.bot.utils.api_client import APIClient

from aiogram.fsm.context import FSMContext
from telegram_bot.bot.keyboards.inline import confirm_link_kb

import os
from dotenv import load_dotenv
import aiohttp

load_dotenv()

router = Router()

@router.message(Command(commands=["start"]))
async def cmd_start_handler(message: Message):
    """
    Обработчик команды /start
    """
    await message.answer(
        f"Привет, {message.from_user.full_name}! Я бот FlowerDelivery.\n"
        "Используй кнопки ниже для взаимодействия.",
        reply_markup=navigation_kb
    )

@router.message(Command(commands=["help"]))
async def cmd_help_handler(message: Message):
    """
    Обработчик команды /help
    """
    await message.answer(
        "Доступные команды:\n"
        "/start - Начать работу с ботом\n"
        "/help - Показать это сообщение\n"
        "/link <username> - Связать Telegram аккаунт с учётной записью на сайте\n"
        "/order - Создать новый заказ\n"
        "/status <order_id> - Узнать статус заказа"
    )
